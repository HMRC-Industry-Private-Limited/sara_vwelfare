<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="view_test_type_answer_form" model="ir.ui.view">
    <field name="name">test.type.answer.form</field>
    <field name="model">test.type.answer</field>
    <field name="arch" type="xml">
      <form string="إجابة الاختبار">
        <sheet>
          <group>
            <group>
              <field name="user_id" readonly="1" />
              <field name="test_id" readonly="1" />
              <field name="submission_date" readonly="1" />
            </group>
            <group>
              <field name="total_score" readonly="1" />
              <field name="max_score" readonly="1" />
              <field name="result_text" readonly="1" />
            </group>
          </group>
          <notebook>
            <page string="الإجابات" name="answers">
              <field name="answer_line_ids" readonly="1">
                <tree>
                  <field name="question_text" />
                  <field name="question_type" />
                  <field name="selected_option_ids" widget="many2many_tags"
                         invisible="question_type not in ['checkbox', 'multiple_choice']" />
                  <field name="text_answer" invisible="question_type != 'text'" />
                  <field name="score" />
                  <field name="max_score" />
                </tree>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <record id="view_test_type_answer_tree" model="ir.ui.view">
    <field name="name">test.type.answer.tree</field>
    <field name="model">test.type.answer</field>
    <field name="arch" type="xml">
      <tree string="إجابات الاختبار" create="false">
        <field name="test_id" />
        <field name="user_id" />
        <field name="submission_date" />
        <field name="total_score" sum="إجمالي النقاط" />
        <field name="max_score" />
        <field name="result_text" />
      </tree>
    </field>
  </record>

  <record id="view_test_type_answer_search" model="ir.ui.view">
    <field name="name">test.type.answer.search</field>
    <field name="model">test.type.answer</field>
    <field name="arch" type="xml">
      <search string="بحث إجابات الاختبار">
        <field name="user_id" />
        <field name="test_id" />
        <separator />
        <!--         <filter string="إجاباتي" name="my_answers" domain="[('user_id', '=', uid)]" /> -->
        <group expand="0" string="تجميع حسب">
          <filter string="المستخدم" name="user" context="{'group_by': 'user_id'}" />
          <filter string="الاختبار" name="test" context="{'group_by': 'test_id'}" />
          <filter string="تاريخ التقديم" name="date" context="{'group_by': 'submission_date:day'}" />
        </group>
      </search>
    </field>
  </record>


  <record id="action_test_type_answer" model="ir.actions.act_window">
    <field name="name">إجابات الاختبار</field>
    <field name="res_model">test.type.answer</field>
    <field name="view_mode">tree,form</field>
    <!--     <field name="context">{'search_default_my_answers': 1, 'search_default_submission_group': 1}</field> -->
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        لم يتم العثور على إجابات!
      </p>
    </field>
  </record>
</odoo>


    <!-- <odoo> -->
    <!--   &lt;!&ndash; Form View لإجابات الاختبار &ndash;&gt; -->
    <!--   <record id="view_test_type_answer_form" model="ir.ui.view"> -->
    <!--     <field name="name">test.type.answer.form</field> -->
    <!--     <field name="model">test.type.answer</field> -->
    <!--     <field name="arch" type="xml"> -->
    <!--       <form string="إجابة الاختبار"> -->
    <!--         <sheet> -->
    <!--           <group> -->
    <!--             <group> -->
    <!--               <field name="user_id" readonly="1" /> -->
    <!--               <field name="test_id" readonly="1" /> -->
    <!--               <field name="submission_date" readonly="1" /> -->
    <!--             </group> -->
    <!--             <group> -->
    <!--               <field name="question_id" readonly="1" /> -->
    <!--               <field name="question_type" invisible="1" /> -->
    <!--               <field name="score" readonly="1" /> -->
    <!--               <field name="max_score" readonly="1" /> -->
    <!--             </group> -->
    <!--           </group> -->
    <!--           <notebook> -->
    <!--             <page string="الإجابة" name="answer"> -->
    <!--               <group> -->
    <!--                 <field name="selected_option_ids" readonly="1" widget="many2many_tags" -->
    <!--                 /> -->
    <!--                 <field name="text_answer" readonly="1" -->
    <!--                 /> -->
    <!--               </group> -->
    <!--             </page> -->
    <!--           </notebook> -->
    <!--         </sheet> -->
    <!--       </form> -->
    <!--     </field> -->
    <!--   </record> -->

    <!--   &lt;!&ndash; Tree View لإجابات الاختبار &ndash;&gt; -->
    <!--   <record id="view_test_type_answer_tree" model="ir.ui.view"> -->
    <!--     <field name="name">test.type.answer.tree</field> -->
    <!--     <field name="model">test.type.answer</field> -->
    <!--     <field name="arch" type="xml"> -->
    <!--       <tree string="إجابات الاختبار" create="false"> -->
    <!--         <field name="test_id" /> -->
    <!--         <field name="question_text" /> -->
    <!--         <field name="score" sum="المجموع" /> -->
    <!--         <field name="max_score" /> -->
    <!--         <field name="submission_date" /> -->
    <!--       </tree> -->
    <!--     </field> -->
    <!--   </record> -->

    <!--   &lt;!&ndash; Search View لإجابات الاختبار &ndash;&gt; -->
    <!--   <record id="view_test_type_answer_search" model="ir.ui.view"> -->
    <!--     <field name="name">test.type.answer.search</field> -->
    <!--     <field name="model">test.type.answer</field> -->
    <!--     <field name="arch" type="xml"> -->
    <!--       <search string="بحث إجابات الاختبار"> -->
    <!--         <field name="user_id" /> -->
    <!--         <field name="test_id" /> -->
    <!--         <field name="question_id" /> -->
    <!--         <field name="submission_group" /> -->
    <!--         <separator /> -->
    <!--         <filter string="إجاباتي" name="my_answers" domain="[('user_id', '=', uid)]" /> -->
    <!--         <group expand="0" string="تجميع حسب"> -->
    <!--           <filter string="المستخدم" name="user" context="{'group_by': 'user_id'}" /> -->
    <!--           <filter string="الاختبار" name="test" context="{'group_by': 'test_id'}" /> -->
    <!--           <filter string="مجموعة التقديم" name="submission_group" context="{'group_by': 'submission_group'}" /> -->
    <!--           <filter string="تاريخ التقديم" name="date" context="{'group_by': 'submission_date:day'}" /> -->
    <!--         </group> -->
    <!--       </search> -->
    <!--     </field> -->
    <!--   </record> -->

    <!--   &lt;!&ndash; نافذة عمل تجميعية لإجابات الاختبار &ndash;&gt; -->
    <!--   <record id="action_test_type_answer" model="ir.actions.act_window"> -->
    <!--     <field name="name">إجابات الاختبار</field> -->
    <!--     <field name="res_model">test.type.answer</field> -->
    <!--     <field name="view_mode">tree,form</field> -->
    <!--     <field name="context">{'search_default_my_answers': 1, 'search_default_submission_group': 1}</field> -->
    <!--     <field name="help" type="html"> -->
    <!--       <p class="o_view_nocontent_smiling_face"> -->
    <!--         لم يتم العثور على إجابات! -->
    <!--       </p> -->
    <!--     </field> -->
    <!--   </record> -->

    <!--   &lt;!&ndash; نافذة عمل للنتائج المجمعة &ndash;&gt; -->
    <!--   <record id="action_test_results_dashboard" model="ir.actions.client"> -->
    <!--     <field name="name">نتائج الاختبارات</field> -->
    <!--     <field name="tag">test_results_dashboard</field> -->
    <!--   </record> -->

    <!-- </odoo> -->



